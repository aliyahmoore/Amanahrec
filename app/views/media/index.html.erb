<%= stylesheet_link_tag 'media', media: 'all' %>

<h1 class="heading text-center" style="color: #403f2b;">Amanah Rec Latest News...</h1>

<div class="image-container text-center my-4">
  <img src="https://voyageminnesota.com/wp-content/uploads/2024/08/c-1722429958481-nasrieen_habib_dsc09767.jpg" 
       alt="Latest News Image" 
       class="news-image img-fluid rounded shadow-sm">
</div>

<% if flash[:alert] %>
  <div class="alert alert-danger text-center">
    <%= flash[:alert] %>
  </div>
<% end %>

<div class="square-container mt-4">
  <div class="square p-3">
    <% if @media.any? %>
      <ul class="list-unstyled">
        <% @media.each do |medium| %>
          <li class="media-item mb-4 p-3 border rounded shadow-sm" id="media-<%= medium.id %>">
            <div class="d-flex justify-content-between">
              <h3 class="media-title font-weight-bold" style="color: #403f2b;"><%= medium.name %></h3>
              <div>
                <%= link_to 'Edit', '#', class: 'btn btn-sm text-white edit-button', style: 'background-color: #e86c00; border-color: #e86c00; margin-top: -10px;', data: { medium_id: medium.id } %>
              </div>
            </div>
            <p class="media-description text-muted" style="color: #403f2b;"><%= medium.description %></p>

            <div>
              <a href="<%= medium.link %>" target="_blank" class="media-link text-decoration-underline" style="color: #403f2b;">View Link</a>
            </div>

            <div class="text-center">
              <%= button_to 'Delete', medium_path(medium), method: :delete, class: 'btn btn-danger btn-sm ml-2 text-white', data: { confirm: 'Are you sure you want to delete this media?' } %>
            </div>
            
            <div class="edit-form-container" id="edit-form-<%= medium.id %>" style="display: none;">
              <%= form_with model: medium, url: medium_path(medium), method: :patch do |f| %>
                <div>
                  <%= f.label :name, style: "color: #403f2b;" %>
                  <%= f.text_field :name, class: 'form-control' %>
                </div>
                <div>
                  <%= f.label :description, style: "color: #403f2b;" %>
                  <%= f.text_area :description, class: 'form-control' %>
                </div>
                <div>
                  <%= f.label :link, "Media Link", style: "color: #403f2b;" %>
                  <%= f.url_field :link, class: 'form-control' %>
                </div>
                <div>
                  <%= f.submit "Update", class: "btn btn-secondary btn-sm text-white" %>
                </div>
              <% end %>
            </div>
          </li>
        <% end %>
      </ul>
    <% else %>
      <p class="text-center text-muted">No Updates Available At This Time.</p>
    <% end %>
  </div>
</div>

<div style="border: 2px solid #6c757d; padding: 20px; border-radius: 8px; background-color: #f8f9fa; max-width: 500px; margin: 50px auto 0;">
  <div style="text-align: center">
    <h2 style="color: #403f2b;">Add New Media</h2>
  </div>
  <%= form_with model: @medium, url: media_path, local: true do |f| %>
    <div>
      <%= f.label :name, style: "color: #403f2b;" %>
      <%= f.text_field :name, required: true, class: "form-control" %>
    </div>

    <div>
      <%= f.label :description, style: "color: #403f2b;" %>
      <%= f.text_area :description, required: true, class: "form-control" %>
    </div>

    <div>
      <%= f.label :link, "Media Link", style: "color: #403f2b;" %>
      <%= f.url_field :link, required: true, class: "form-control" %>
    </div>

    <div class="text-center mt-3">
      <%= f.submit "Add Media", class: "btn btn-secondary text-white" %>
    </div>
  <% end %>
</div>
