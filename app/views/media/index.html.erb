<%= stylesheet_link_tag 'media', media: 'all' %>

<h1 class="heading text-center my-5" style="color: #403f2b;">Amanah Rec Latest News...</h1>

<div class="image-container text-center mb-5">
  <img src="https://voyageminnesota.com/wp-content/uploads/2024/08/c-1722429958481-nasrieen_habib_dsc09767.jpg" 
       alt="Latest News Image" 
       class="news-image">
</div>

<% if flash[:alert] %>
  <div class="alert alert-danger text-center mb-4">
    <%= flash[:alert] %>
  </div>
<% end %>

<div class="square-container mt-5">
  <div class="square p-4" style="background-color: #DACCB1;">
    <% if @media.any? %>
      <ul class="list-unstyled">
        <% @media.each do |medium| %>
          <li class="media-item mb-5 p-4 border rounded shadow" id="media-<%= medium.id %>" style="background-color: #FFF;">
            <div class="d-flex justify-content-between align-items-center mb-3">
              <h3><%= medium.name %></h3>
              <div>
                <%= link_to 'Edit', '#', 
                            class: 'btn btn-sm text-white edit-button text-decoration-none', 
                            style: 'background-color: #e86c00; border-color: #e86c00;', 
                            data: { medium_id: medium.id } %>
              </div>
            </div>
            <p class="media-description mb-4"><%= medium.description %></p>

            <div class="mb-3">
              <a href="<%= medium.link %>" target="_blank" 
                 class="media-link text-decoration-underline fw-bold" 
                 style="color: #403f2b;">View Link</a>
            </div>

            <div class="text-center">
              <%= button_to 'Delete', medium_path(medium), method: :delete, 
                            class: 'btn btn-danger btn-sm text-white', 
                            data: { confirm: 'Are you sure you want to delete this media?' } %>
            </div>
            
            <div class="edit-form-container mt-4" id="edit-form-<%= medium.id %>" style="display: none;">
              <%= form_with model: medium, url: medium_path(medium), method: :patch do |f| %>
                <div class="mb-3">
                  <%= f.label :name, class: 'form-label', style: "color: #403f2b;" %>
                  <%= f.text_field :name, class: 'form-control' %>
                </div>
                <div class="mb-3">
                  <%= f.label :description, class: 'form-label', style: "color: #403f2b;" %>
                  <%= f.text_area :description, class: 'form-control', rows: 4 %>
                </div>
                <div class="mb-3">
                  <%= f.label :link, "Media Link", class: 'form-label', style: "color: #403f2b;" %>
                  <%= f.url_field :link, class: 'form-control' %>
                </div>
                <div class="text-center">
                  <%= f.submit "Update", class: "btn btn-secondary btn-lg text-white" %>
                </div>
              <% end %>
            </div>
          </li>
        <% end %>
      </ul>
    <% else %>
      <p class="text-center text-muted fs-5">No Updates Available At This Time.</p>
    <% end %>
  </div>
</div>


<div class="card shadow-sm p-4 mx-auto mt-5" style="max-width: 500px;">
  <div class="text-center mb-3">
    <h2 class="text-dark">Add New Media</h2>
  </div>

  <%= form_with model: @medium, url: media_path, local: true do |f| %>
    <div class="mb-3">
      <%= f.label :name, class: "form-label text-dark" %>
      <%= f.text_field :name, required: true, class: "form-control" %>
    </div>

    <div class="mb-3">
      <%= f.label :description, class: "form-label text-dark" %>
      <%= f.text_area :description, required: true, class: "form-control" %>
    </div>

    <div class="mb-3">
      <%= f.label :link, "Media Link", class: "form-label text-dark" %>
      <%= f.url_field :link, required: true, class: "form-control" %>
    </div>

    <div class="text-center mt-3">
      <%= f.submit "Add Media", class: "btn btn-secondary text-white" %>
    </div>
  <% end %>
</div>

