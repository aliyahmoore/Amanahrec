<div class="activity-show">
  <h1 class="activity-title"><%= @activity.title %></h1>

  <!-- Activity Image Section -->
  <div class="activity-images">
    <% if @activity.images.attached? %>
      <% @activity.images.each do |image| %>
        <div class="activity-image">
          <%= image_tag image, class: "activity-image-preview" %>
        </div>
      <% end %>
    <% else %>
      <p>No images uploaded for this activity.</p>
    <% end %>
  </div>

  <!-- Activity Details -->
  <div class="activity-details">
    <p><strong>Description:</strong> <%= @activity.description %></p>
    <p><strong>Date:</strong> <%= @activity.date %></p>
    <p><strong>Location:</strong> <%= @activity.location %></p>
    <p><strong>Capacity:</strong> <%= @activity.capacity %></p>
    <p><strong>What to Bring:</strong> <%= @activity.what_to_bring %></p>
    <p><strong>Rules:</strong> <%= @activity.rules %></p>
    <p><strong>Notes:</strong> <%= @activity.notes %></p>
    <p><strong>Cost:</strong> <%= number_to_currency(@activity.cost, unit: "$", precision: 2) %></p>
    <p><strong>Duration:</strong> <%= @activity.duration %> hours</p>
    
    <% if @activity.recurrence_pattern.present? %>
      <p><strong>Recurring:</strong> <%= @activity.recurrence_pattern.capitalize %></p>

      <% if @activity.recurrence_pattern == "weekly" && @activity.recurrence_days.present? %>
        <p><strong>Days:</strong>
          <% days = @activity.recurrence_days.split(',').map(&:capitalize) %>
          <%= days.join(', ') %>
        </p>
      <% end %>

      <% if @activity.recurrence_time.present? %>
        <p><strong>Recurring Time:</strong> <%= @activity.recurrence_time.strftime('%I:%M %p') %></p>
      <% end %>
    <% end %>
  </div>

  <!-- Action Buttons (Edit, Delete, Back) -->
  <div class="activity-actions">
    <%= link_to 'Edit', edit_activity_path(@activity), class: "edit-button" %>
    <%= button_to 'Delete', @activity, method: :delete, data: { confirm: 'Are you sure you want to delete this activity?' }, class: "delete-button" %>
    <%= link_to 'Back to Activities', activities_path, class: "back-button" %>
    <%= button_to 'Register Now', activity_payments_path(@activity, paymentable_type: 'Activity', paymentable_id: @activity.id), method: :post, class: 'activity-payments btn btn-primary', data: { turbo: false } %>
  </div>
</div>
